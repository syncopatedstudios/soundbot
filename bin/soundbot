#!/usr/bin/env ruby

Signal.trap("INT") { exit 1 }

lib_dir = File.expand_path("../../lib", __FILE__)
$LOAD_PATH.unshift lib_dir if File.directory?(lib_dir)

require "commander/import"
require "soundbot/cli"
require 'yaml'

CONFIG=Pathname.new(File.join(ENV['HOME'], '.config', 'soundbot', 'config.yml'))


# create the config directory and copy over the default config unless they already exist, in which case just load the config

FileUtils.mkpath(CONFIG.parent) unless CONFIG.parent.exist?

unless CONFIG.exist?
  default_config = File.join(lib_dir, 'config.default.yaml')

  FileUtils.cp(default_config, CONFIG)

end

def load_config
  config = YAML::load(File.open("#{CONFIG}"))

  return config
end

config = load_config

p config
